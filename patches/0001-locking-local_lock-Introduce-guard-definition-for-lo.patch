From: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
Date: Wed, 29 May 2024 18:02:24 +0200
Subject: [PATCH 01/15] locking/local_lock: Introduce guard definition for
 local_lock.

Introduce lock guard definition for local_lock_t. There are no users
yet.

Link: https://lore.kernel.org/r/20240529162927.403425-2-bigeasy@linutronix.de
Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
---
 include/linux/local_lock.h |   11 +++++++++++
 1 file changed, 11 insertions(+)

--- a/include/linux/local_lock.h
+++ b/include/linux/local_lock.h
@@ -51,4 +51,15 @@
 #define local_unlock_irqrestore(lock, flags)			\
 	__local_unlock_irqrestore(lock, flags)
 
+DEFINE_GUARD(local_lock, local_lock_t __percpu*,
+	     local_lock(_T),
+	     local_unlock(_T))
+DEFINE_GUARD(local_lock_irq, local_lock_t __percpu*,
+	     local_lock_irq(_T),
+	     local_unlock_irq(_T))
+DEFINE_LOCK_GUARD_1(local_lock_irqsave, local_lock_t __percpu,
+		    local_lock_irqsave(_T->lock, _T->flags),
+		    local_unlock_irqrestore(_T->lock, _T->flags),
+		    unsigned long flags)
+
 #endif
